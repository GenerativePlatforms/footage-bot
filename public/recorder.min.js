!function(){var e="https://uncommon-hare-880.convex.site/api/recordings/ingest",n=[],r=null,o=null,i={maskAllInputs:!0,maskTextContent:!1};function a(){if(0!==n.length){var r=n.splice(0,n.length),o=navigator.userAgent.toLowerCase(),a="desktop";/ipad|tablet|playbook|silk/.test(o)?a="tablet":/mobile|iphone|ipod|android|blackberry|opera mini|iemobile/.test(o)&&(a="mobile");var s="Unknown";o.includes("chrome")&&!o.includes("edge")?s="Chrome":o.includes("firefox")?s="Firefox":o.includes("safari")&&!o.includes("chrome")?s="Safari":o.includes("edge")&&(s="Edge");var t="Unknown";o.includes("windows")?t="Windows":o.includes("mac")?t="macOS":o.includes("linux")&&!o.includes("android")?t="Linux":o.includes("android")?t="Android":/iphone|ipad|ipod/.test(o)&&(t="iOS"),fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:window._improverSessionId,events:r,metadata:{startTime:Date.now(),userAgent:navigator.userAgent,screenWidth:window.innerWidth,screenHeight:window.innerHeight,pageUrl:window.location.href,deviceType:a,browser:s,os:t}})}).then(function(e){e.ok||n.unshift.apply(n,r)}).catch(function(){n.unshift.apply(n,r)})}}window.ImproverRecorder={init:function(e){if("undefined"==typeof rrweb)return console.error("[Improver] rrweb not loaded"),void 0;if(r)return console.warn("[Improver] Already initialized"),void 0;e&&(i=Object.assign({},i,e)),window._improverSessionId="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)}),console.log("[Improver] Starting:",window._improverSessionId),r=rrweb.record({emit:function(e){n.push(e),n.length>=50&&a()},maskAllInputs:i.maskAllInputs,maskTextContent:i.maskTextContent,recordLog:!0,recordCanvas:!1}),o=setInterval(a,1e4),window.addEventListener("beforeunload",a),window.addEventListener("pagehide",a),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&a()})},stop:function(){r&&(r(),r=null),o&&(clearInterval(o),o=null),a(),console.log("[Improver] Stopped:",window._improverSessionId)},getSessionId:function(){return window._improverSessionId}}}();
