!function(){"use strict";var e="https://uncommon-hare-880.convex.site/api/recordings/ingest",n=[],i=null,t=null,r=!1,o=null;function d(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)})}function a(){if(o)return o;try{(o=sessionStorage.getItem("_improverSessionId"))||(o=d(),sessionStorage.setItem("_improverSessionId",o))}catch(e){o=d()}return o}function s(){if(0!==n.length){var i=n.splice(0,n.length),t=function(){var e=navigator.userAgent.toLowerCase(),n="desktop";/ipad|tablet|playbook|silk/.test(e)?n="tablet":/mobile|iphone|ipod|android|blackberry|opera mini|iemobile/.test(e)&&(n="mobile");var i="Unknown";e.indexOf("chrome")>-1&&-1===e.indexOf("edge")?i="Chrome":e.indexOf("firefox")>-1?i="Firefox":e.indexOf("safari")>-1&&-1===e.indexOf("chrome")?i="Safari":e.indexOf("edge")>-1&&(i="Edge");var t="Unknown";return e.indexOf("windows")>-1?t="Windows":e.indexOf("mac")>-1?t="macOS":e.indexOf("linux")>-1&&-1===e.indexOf("android")?t="Linux":e.indexOf("android")>-1?t="Android":/iphone|ipad|ipod/.test(e)&&(t="iOS"),{deviceType:n,browser:i,os:t}}(),r=JSON.stringify({sessionId:a(),events:i,metadata:{startTime:Date.now(),userAgent:navigator.userAgent,screenWidth:window.innerWidth,screenHeight:window.innerHeight,pageUrl:window.location.href,deviceType:t.deviceType,browser:t.browser,os:t.os}});if(navigator.sendBeacon)navigator.sendBeacon(e,new Blob([r],{type:"application/json"}))||n.unshift.apply(n,i);else fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:r,keepalive:!0}).catch(function(){n.unshift.apply(n,i)})}}a(),function(e){if("undefined"==typeof rrweb){var n=document.createElement("script");n.src="https://cdn.jsdelivr.net/npm/rrweb@2.0.0-alpha.11/dist/rrweb.min.js",n.onload=e,n.onerror=function(){console.error("[Improver] Failed to load rrweb")},document.head.appendChild(n)}else e()}(function(){r&&i||"undefined"!=typeof rrweb&&(i=rrweb.record({emit:function(e){n.push(e),n.length>=50&&s()},maskAllInputs:!0,maskTextContent:!1,recordCanvas:!1}),t||(t=setInterval(s,1e4)),r||(window.addEventListener("beforeunload",s),window.addEventListener("pagehide",s),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&s()})),r=!0)})}();